<!DOCTYPE html>
<html>
<head>
  <title id="doc-title">Chess (Tutorial)</title>
  <link rel="icon" href="../icon.png">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@300;700&display=swap');
    * {font-family: Oswald;}
    a {color: inherit; text-decoration: inherit;}
    @font-face {
      font-family: 'Case';
      src: url('../CASEFONT.ttf');
    }
    ::selection {color:var(--white); background:var(--black);}
    *:focus {outline: none;}
    @keyframes fadeIn {from {opacity: 0;}}
    :root {
      --black: #1C1D21;
      --semiblack: #1C1D2180;
      --white: #FFF6F0;
      --green: #3cb978;
      --blue: #4a4de8;
      --red: #e42535;
      --yellow: #fec620;
      --board1: #C1C3D7;
      --board2: #635B9A;
    }
    
    body {
      background-color: var(--white);
    }
    
    article {
      user-select: text;
      width: 40rem;
      margin: 4rem auto;
      font-size: 1.25rem;
    }
    
    article p {
      text-align: justify;
    }
    
    article p a {
      text-decoration: underline;
    }
    
    code {
      display: block;
      font-family: monospace;
      font-size: 1.375rem;
    }
    
    code b {
      font-family: monospace;
      font-weight: bold;
      color: var(--blue);
    }
    
    #font-test {
      font-family: Case;
      width: 100%; border: none; line-height: 4rem; font-size: 4rem; max-height: 4rem; overflow: hidden;
    }
    
    ::-webkit-scrollbar {width: 1rem;}
    ::-webkit-scrollbar-thumb {background: var(--black);}
  </style>
</head>
<body id="body">
  <article>
    <h1>How can I make my own?</h1>
    <p>You have to learn a bit of JS first. (I tried making an editor but it wasn't good.)</p>
    <p>To design your own gamemode, you'll have to create a .js file to be loaded on the chess home page, so before you do anything, make your empty .js file.</p>
    <h3>Gamemode metadata</h3>
    <p>Firstly, you have to decide on a unique ID to identify your gamemode. I'll be using the word "custom". Your first statement will just give a name and description for the gamemode, like this:</p>
    <code>
      gamemodes.<b>custom</b> = {<br>
      &nbsp;&nbsp;name: <b>"My Gamemode"</b>,<br>
      &nbsp;&nbsp;desc: <b>"Short description here"</b><br>
      };
    </code>
    <p>Everything I highlight in blue is places where you'd put in your own numbers or words.</p>
    <h3>Piece information</h3>
    <p>Piece information stores how pieces look and act. For our example, I'll be recreating the rook. Begin your statement like this.</p>
    <code>
      gamemodes.<b>custom</b>.piece.<b>rook</b> = {<br>
      &nbsp;&nbsp;name: <b>"rook"</b>,<br>
      &nbsp;&nbsp;category: <b>"standard"</b>,<br>
      &nbsp;&nbsp;royalty: <b>true</b>,<br>
      &nbsp;&nbsp;textChar: <b>"t"</b>,<br>
      &nbsp;&nbsp;moves: [<br>
      &nbsp;&nbsp;]<br>
      };
    </code>
    <p>The name is of course the name of the piece (but it can contain spaces, unlike the ID at the top). The category just says where this piece comes from. royalty: true is only neccessary if the piece is royal, meaning that capturing it ends the game. The textChar is the character from the font used to represent the piece. You can try out the font here:</p>
    <div id="font-test" contenteditable="plaintext-only" spellcheck="false">tmvwlo.</div>
    <p>Defining the moves of a piece is a bit tricky. First, understand which moves you'll need to create. A bishop has 4 moves (one for each direction, with no maximum distance). A king has 8 moves (one for each direction, but only one step).</p>
    <p>For every one of these moves, you'll need to at least specify the direction of movement and what action it takes. You can additionally specify a maximum distance (for example, kings have a max distance of 1 for every direction). You can also specify that a move can only happen if a piece has been used X or fewer times (such as pawns' unique opening move).</p>
    <p>Here's what the rook moves look like.</p>
    <code>
      moves: [<br>
      &nbsp;&nbsp;{xGo: <b>0</b>, yGo: <b>-1</b>, when: <b>"both"</b>},<br>
      &nbsp;&nbsp;{xGo: <b>0</b>, yGo: <b>1</b>, when: <b>"both"</b>},<br>
      &nbsp;&nbsp;{xGo: <b>-1</b>, yGo: <b>0</b>, when: <b>"both"</b>},<br>
      &nbsp;&nbsp;{xGo: <b>1</b>, yGo: <b>0</b>, when: <b>"both"</b>}<br>
      ]
    </code>
    <p>Each of the 4 moves are contained in curly brackets. xGo is, counterintuitively, vertical motion (negative xGo values are towards the enemy's side of the board, positive xGo values are towards your own side of the board). yGo is the horizontal motion, and usually pieces will have symmetric moves horizontally. The when can contain one of five values:</p>
    <ul>
      <li>"both": can move to an empty spot or capture if an enemy is already there</li>
      <li>"move": can only move to empty spots and will not capture</li>
      <li>"kill": only can move if they are capturing (like a pawn's diagonal move)</li>
      <li>"ranged": will eliminate the target at the specified coordinates without moving your own piece</li>
      <li>"convert": will convert the enemy piece to your own team without either pieces moving.</li>
    </ul>
    <p>Of these moves, killing takes priority over a ranged attack which takes priority over conversion.</p>
    <p>To specify that a piece can only move a maximum of some number of spaces, you can modify it to look like this:</p>
    <code>
      {xGo: <b>0</b>, yGo: <b>-1</b>, when: <b>"both"</b>, max: <b>1</b>}<br>
    </code>
    <p>In normal chess, almost every move either has no maximum (bishops, rooks) or a max of 1 (king, pawn). Note that knights have a max of 1, even if they move more than just one spot: that's because the knight's move coordinates are (2, 1), which is considered one step.</p>
    <p>And finally, you can set a move for when a piece has been used less than some number of times previously. For example, pawns have a move that only works if they have moved 0 or fewer times, which looks like this:</p>
    <code>
      {xGo: <b>-1</b>, yGo: <b>0</b>, when: <b>"move"</b>, max: <b>2</b>, previousUses: <b>0</b>}<br>
    </code>
    <p>Repeat this whole process for every piece you'll want in your gamemode. If you want to start off by modifying the existing pieces, you can find that code <a href="standard-pieces.js">here</a>.</p>
    <h3>Initial board</h3>
    <p>The initial board is a rectangular array of arrays, which looks like this (right now, all tiles are null):</p>
    <code>
      gamemodes.<b>custom</b>.board = [<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null]<br>
      ];
    </code>
    <p>You can make this board any length and width. A null means that, as of the start of the game, no piece occupies that square. You can put a piece on a square by replacing the null with this:</p>
    <code>
      {piece: <b>"rook"</b>, color: <b>"black"</b>}
    </code>
    <p>I hope I don't have to explain what those two values do.</p>
    <h3>One last thing</h3>
    <p>At the bottom of the file, put this (but replace "custom" with whatever you chose for your gamemode ID):</p>
    <code>
      beginGame(<b>"custom"</b>);
    </code>
    <h3>Using the file</h3>
    <p>In the end, you should have a .js file that looks like this:</p>
    <code>
      gamemodes.<b>custom</b> = {<br>
      &nbsp;&nbsp;name: <b>"My Gamemode"</b>,<br>
      &nbsp;&nbsp;desc: <b>"Short description here"</b><br>
      };<br>
      <br>
      gamemodes.<b>custom</b>.piece.<b>rook</b> = {<br>
      &nbsp;&nbsp;name: <b>"rook"</b>,<br>
      &nbsp;&nbsp;category: <b>"standard"</b>,<br>
      &nbsp;&nbsp;royalty: <b>true</b>,<br>
      &nbsp;&nbsp;textChar: <b>"t"</b>,<br>
      &nbsp;&nbsp;moves: [<br>
      &nbsp;&nbsp;&nbsp;&nbsp;{xGo: <b>0</b>, yGo: <b>-1</b>, when: <b>"both"</b>},<br>
      &nbsp;&nbsp;&nbsp;&nbsp;{xGo: <b>0</b>, yGo: <b>1</b>, when: <b>"both"</b>},<br>
      &nbsp;&nbsp;&nbsp;&nbsp;{xGo: <b>-1</b>, yGo: <b>0</b>, when: <b>"both"</b>},<br>
      &nbsp;&nbsp;&nbsp;&nbsp;{xGo: <b>1</b>, yGo: <b>0</b>, when: <b>"both"</b>}<br>
      &nbsp;&nbsp;]<br>
      };<br>
      <br>
      gamemodes.<b>custom</b>.board = [<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null],<br>
        &nbsp;&nbsp;[null,null,null,null,null,null,null,null]<br>
      ];<br>
      <br>
      beginGame(<b>"custom"</b>);
    </code>
    <p>You should first upload your .js file somewhere that a web browser can access it. I recommend just uploading it to Discord. Then take the URL of the chess homepage, add a ? after, and your URL after that. If you've done everything correctly, the game should start up. You could also share this URL with a friend so they can play the same gamemode.</p>
  </article>
</body>
</html>